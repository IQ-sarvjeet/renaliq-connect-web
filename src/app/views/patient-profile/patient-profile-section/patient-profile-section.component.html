<div class="card mb-3">
  <div class="card-body">
    <div class="text-center">
      <!-- <img
        alt="Image description"
        src="../assets/images/faces/2.jpg"
        class="avatar-xxxl rounded-circle me-3 my-auto"
      /> -->
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-50"
          viewBox="0 0 512 512"
        >
          <!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
          <path
            style="fill: #d3d0d0"
            d="M406.5 399.6C387.4 352.9 341.5 320 288 320H224c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3h64c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z"
          />
        </svg>
      </div>
      <h4 class="mt-3">{{ profileDetail.name }}</h4>
    </div>
    <div class="form-row mt-4">
      <div class="col-6">
        <div class="fs-12 op-0-75">Enrollement No</div>
        <div>{{ profileDetail.enrollmentNumber }}</div>
      </div>
      <div class="col-6">
        <div class="fs-12 op-0-75">Risk Category</div>
        <div>{{patientStatus.riskCategory}}</div>
      </div>
    </div>
    <div class="form-row mt-4">
      <div class="col-6">
        <div class="fs-12 op-0-75">Status</div>
        <div>{{ profileDetail.status }}</div>
      </div>
      <div class="col-6">
        <div class="fs-12 op-0-75">Date Of Birth</div>
        <div>
          {{
            profileDetail.dateofBirth
              ? moment(profileDetail.dateofBirth).format("MM/DD/YYYY")
              : ""
          }}
        </div>
      </div>
    </div>
    <div class="form-row mt-4">
      <!-- <div class="col-6">
        <div class="fs-12 op-0-75">Health Plan</div>
        <div>-</div>
      </div> -->
      <div class="col-6">
        <div class="fs-12 op-0-75">Engaged Status</div>
        <div *ngIf="patientStatus.isEngaged == true">Yes</div>
        <div *ngIf="patientStatus.isEngaged == false">-</div>
      </div>
      <div class="col-6">
        <div class="fs-12 op-0-75">Days since last assessed</div>
        <div>{{getDays(patientStatus.lastAssessmentDate)}}</div>
      </div>
    </div>
    <!-- <div class="form-row mt-4">
      <div class="col-6">
        <div class="fs-12 op-0-75">Program</div>
        <div>-</div>
      </div>
      <div class="col-6">
        <div class="fs-12 op-0-75">Days since last assessed</div>
        <div>{{getDays(patientStatus.lastAssessmentDate)}}</div>
      </div>
    </div> -->
  </div>
</div>
<div class="text-center mb-4" *ngIf="patientStatus.carePlanStatus == '1'">
  <a
    data-bs-target="#carePlanFilter"
    data-bs-toggle="modal"
    href="javascript:void(0)"
    class="btn btn-secondary ms-3"
    ><i class="icon icon-eye me-1"></i> VIEW CARE PLAN</a
  >
</div>

<!-- Care Plan MODAL -->
<div class="modal fade" id="carePlanFilter">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content modal-content-demo">
      <div class="modal-header bg-gray-200">
        <h4 class="modal-title fw-semibold">Care Plans</h4>
        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-4">
            <div class="fs-12 op-0-75">Enrollement No</div>
            <div class="fw-semibold">{{ profileDetail.enrollmentNumber }}</div>
          </div>
          <div class="col-4 border-start">
            <div class="fs-12 op-0-75">Patient Name</div>
            <div class="fw-semibold text-truncate">
              {{ profileDetail.name }}
            </div>
          </div>
          <div class="col-4 border-start">
            <div class="fs-12 op-0-75">State</div>
            <div class="fw-semibold">{{patientStatus.stage}}</div>
          </div>
        </div>
        <hr />
        <div class="d-flex mt-4" *ngIf="carePlans.length > 0">
          <div class="flex-fill pt-1">
            Latest Care Plan generated on on
            {{
              carePlans[0].createdOn
                ? moment(carePlans[0].createdOn).format("MM/DD/YYYY")
                : "-"
            }}
          </div>
          <div>
            <a
              href="javascript:void(0)"
              class="btn btn-secondary ms-3"
              (click)="downloadPlan(carePlans[0])"
              ><i class="fa fa-download me-1"></i> Download</a
            >
          </div>
        </div>
        <hr />
        <div class="mt-3 mb-4"><strong>Previous Care Plans</strong></div>
        <app-spinner *ngIf="loadingCarePlan"></app-spinner>
        <div class="row g-2" *ngIf="!loadingCarePlan">
          <div class="col-4" *ngFor="let plan of carePlans">
            <a
              href="javascript:void(0)"
              class="btn btn-outline-secondary btn-block"
              (click)="downloadPlan(plan)"
              ><i class="fa fa-download me-1"></i>
              {{
                plan.createdOn
                  ? moment(plan.createdOn).format("MM/DD/YYYY")
                  : "-"
              }}</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
